
version: 2

sources:
  - name: banvic_raw
    description: "Dados brutos do sistema ERP Banvic"
    schema: dev
    tables:
      - name: agencias
        description: "Dados das agências bancárias"
        columns:
          - name: cod_agencia
            description: "Código da agência - chave primária"
            data_tests:
              - unique
              - not_null
          - name: nome
            description: "Nome da agência"
          - name: endereco
            description: "Endereço da agência"
          - name: cidade
            description: "Cidade"
          - name: uf
            description: "Estado"
          - name: data_abertura
            description: "Data de abertura"
          - name: tipo_agencia
            description: "Tipo de agência (Digital/Física)"

      - name: clientes
        description: "Dados dos clientes"
        columns:
          - name: cod_cliente
            description: "Código do cliente - chave primária"
            data_tests:
              - unique
              - not_null
          - name: primeiro_nome
            description: "Primeiro nome"
          - name: ultimo_nome
            description: "Sobrenome"
          - name: email
            description: "Endereço de email"
          - name: tipo_cliente
            description: "Tipo de cliente (PF/PJ)"
          - name: data_inclusao
            description: "Data de inclusão"
          - name: cpfcnpj
            description: "Documento CPF ou CNPJ"
          - name: data_nascimento
            description: "Data de nascimento"
          - name: endereco
            description: "Endereço"
          - name: cep
            description: "Código postal"

      - name: colaboradores
        description: "Dados dos colaboradores"
        columns:
          - name: cod_colaborador
            description: "Código do colaborador - chave primária"
            data_tests:
              - unique
              - not_null
          - name: primeiro_nome
            description: "Primeiro nome"
          - name: ultimo_nome
            description: "Sobrenome"
          - name: email
            description: "Endereço de email"
          - name: cpf
            description: "Documento CPF"
          - name: data_nascimento
            description: "Data de nascimento"
          - name: endereco
            description: "Endereço"
          - name: cep
            description: "Código postal"

      - name: contas
        description: "Dados das contas"
        columns:
          - name: num_conta
            description: "Número da conta - chave primária"
            data_tests:
              - unique
              - not_null
          - name: cod_cliente
            description: "Código do cliente - chave estrangeira"
          - name: cod_agencia
            description: "Código da agência - chave estrangeira"
          - name: cod_colaborador
            description: "Código do colaborador - chave estrangeira"
          - name: tipo_conta
            description: "Tipo de conta"
          - name: data_abertura
            description: "Data de abertura"
          - name: saldo_total
            description: "Saldo total"
          - name: saldo_disponivel
            description: "Saldo disponível"
          - name: data_ultimo_lancamento
            description: "Data do último lançamento"

      - name: propostas_credito
        description: "Dados das propostas de crédito"
        columns:
          - name: cod_proposta
            description: "Código da proposta - chave primária"
            data_tests:
              - unique
              - not_null
          - name: cod_cliente
            description: "Código do cliente - chave estrangeira"
          - name: cod_colaborador
            description: "Código do colaborador - chave estrangeira"
          - name: data_entrada_proposta
            description: "Data de entrada da proposta"
          - name: taxa_juros_mensal
            description: "Taxa de juros mensal"
          - name: valor_proposta
            description: "Valor da proposta"
          - name: valor_financiamento
            description: "Valor do financiamento"
          - name: valor_entrada
            description: "Valor da entrada"
          - name: valor_prestacao
            description: "Valor da prestação"
          - name: quantidade_parcelas
            description: "Quantidade de parcelas"
          - name: carencia
            description: "Período de carência"
          - name: status_proposta
            description: "Status da proposta"

      - name: transacoes
        description: "Dados das transações"
        columns:
          - name: cod_transacao
            description: "Código da transação - chave primária"
            data_tests:
              - unique
              - not_null
          - name: num_conta
            description: "Número da conta - chave estrangeira"
          - name: data_transacao
            description: "Data da transação"
          - name: nome_transacao
            description: "Nome/tipo da transação"
          - name: valor_transacao
            description: "Valor da transação"

      - name: colaborador_agencia
        description: "Dados do relacionamento colaborador-agência"
        columns:
          - name: cod_colaborador
            description: "Código do colaborador - chave estrangeira"
          - name: cod_agencia
            description: "Código da agência - chave estrangeira"

      - name: usd_brl
        description: "Taxa de câmbio USD/BRL histórica"
        columns:
          - name: date
            description: "Data da taxa de câmbio"
            data_tests:
              - not_null
          - name: exchange_rate_br
            description: "Taxa de câmbio USD para BRL"
            data_tests:
              - not_null

      - name: feriados_pmf
        description: "Feriados de Florianópolis/SC"
        columns:
          - name: Data
            description: "Data do feriado"
            data_tests:
              - not_null
          - name: Dia_da_Semana
            description: "Dia da semana do feriado"
          - name: Feriado
            description: "Nome do feriado"
  
  - name: cotacao
    description: "Cotacao do dolar"
    schema: dev
    tables:
      - name: usd_brl
        description: "Cotacao do dolar"
        columns:
          - name: date
            description: "Data da cotacao"
            data_tests:
              - not_null